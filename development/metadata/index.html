
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://hishel.com/development/metadata/">
      
      
        <link rel="prev" href="../storages/">
      
      
        <link rel="next" href="../specification/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Metadata - Hishel</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#request-and-response-metadata" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Hishel" class="md-header__button md-logo" aria-label="Hishel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hishel
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Metadata
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/karpetrosyan/hishel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Hishel" class="md-nav__button md-logo" aria-label="Hishel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Hishel
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/karpetrosyan/hishel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 22-3.86-1.55c.7-1.53 1.2-3.11 1.51-4.72zM7.86 20.45 4 22l2.35-6.27c.31 1.61.81 3.19 1.51 4.72M12 2s5 2 5 10c0 3.1-.75 5.75-1.67 7.83A2 2 0 0 1 13.5 21h-3a2 2 0 0 1-1.83-1.17C7.76 17.75 7 15.1 7 12c0-8 5-10 5-10m0 10c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"/></svg>
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../storages/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg>
  
  <span class="md-ellipsis">
    Storages
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 20h4v-4h-4m0-2h4v-4h-4m-6-2h4V4h-4m6 4h4V4h-4m-6 10h4v-4h-4m-6 4h4v-4H4m0 10h4v-4H4m6 4h4v-4h-4M4 8h4V4H4z"/></svg>
  
  <span class="md-ellipsis">
    Metadata
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 20h4v-4h-4m0-2h4v-4h-4m-6-2h4V4h-4m6 4h4V4h-4m-6 10h4v-4h-4m-6 4h4v-4H4m0 10h4v-4H4m6 4h4v-4h-4M4 8h4V4H4z"/></svg>
  
  <span class="md-ellipsis">
    Metadata
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#request-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Request Metadata
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request Metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hishel_ttl" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_ttl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_refresh_ttl_on_access" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_refresh_ttl_on_access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_spec_ignore" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_spec_ignore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_body_key" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_body_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#response-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Response Metadata
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Response Metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hishel_from_cache" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_from_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_revalidated" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_revalidated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_spec_ignored" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_spec_ignored
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_stored" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_stored
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-reference-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata Reference Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metadata Reference Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-request-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Request Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-metadata-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Request Metadata Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-response-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Reading Response Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-metadata-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Response Metadata Fields
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"/></svg>
  
  <span class="md-ellipsis">
    Sans-I/O Caching
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Integrations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/httpx/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 21h-2V6L9.03 3.97 10 3l2 2 2-2 1 1-2 2zM7 6a5.002 5.002 0 0 0-3 9v2c0 2.21 1.79 4 4 4 .72 0 1.39-.19 1.97-.5l.03-.04V7c-.84-.63-1.87-1-3-1m-.5 6.5L5 11l1.5-1.5L8 11zM22 11c0-2.76-2.24-5-5-5-1.12 0-2.15.37-3 1v13.46c.59.35 1.27.54 2 .54 2.21 0 4-1.79 4-4v-2c1.21-.91 2-2.36 2-4m-4.5 1.5L16 11l1.5-1.5L19 11z"/></svg>
  
  <span class="md-ellipsis">
    httpx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/requests/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>
  
  <span class="md-ellipsis">
    requests
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3 6h-2c0-1.2-.75-2.28-1.87-2.7L8.97 11H1v11h6v-1.44l7 1.94 8-2.5v-1c0-1.66-1.34-3-3-3M5 20H3v-7h2zm8.97.41L7 18.5V13h1.61l5.82 2.17c.34.13.57.46.57.83 0 0-2-.05-2.3-.15l-2.38-.79-.63 1.9 2.38.79c.51.17 1.04.25 1.58.25H19c.39 0 .74.24.9.57z"/></svg>
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#request-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Request Metadata
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request Metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hishel_ttl" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_ttl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_refresh_ttl_on_access" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_refresh_ttl_on_access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_spec_ignore" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_spec_ignore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_body_key" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_body_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#response-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Response Metadata
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Response Metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hishel_from_cache" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_from_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_revalidated" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_revalidated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_spec_ignored" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_spec_ignored
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hishel_stored" class="md-nav__link">
    <span class="md-ellipsis">
      hishel_stored
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-reference-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata Reference Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metadata Reference Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-request-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Request Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-metadata-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Request Metadata Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-response-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Reading Response Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-metadata-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Response Metadata Fields
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="request-and-response-metadata">Request and Response Metadata</h1>
<p>Metadata allows you to control caching behavior and inspect cache operations. Hishel supports metadata on both requests (to control caching) and responses (to inspect what happened).</p>
<p>All metadata fields are prefixed with <code>hishel_</code> to avoid collisions with user data.</p>
<hr />
<h2 id="request-metadata">Request Metadata</h2>
<p>Request metadata controls how Hishel caches the request and its response. You can set metadata using:</p>
<ul>
<li><strong>httpx</strong>: <code>extensions</code> parameter (recommended) or <code>X-Hishel-*</code> headers</li>
<li><strong>requests</strong>: <code>X-Hishel-*</code> headers</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">httpx supports both methods</p>
<p>While httpx supports both <code>extensions</code> and headers, using <code>extensions</code> is recommended as it provides better type safety and doesn't pollute HTTP headers sent to the server.</p>
</div>
<h3 id="hishel_ttl">hishel_ttl</h3>
<p><strong>Type:</strong> <code>float | None</code></p>
<p><strong>Description:</strong> Sets a custom time-to-live (TTL) for the cached response. After the specified number of seconds, the cached response will be considered expired and removed during cleanup.</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Override default TTL for specific endpoints</li>
<li>Set shorter TTL for frequently changing data</li>
<li>Set longer TTL for static resources</li>
</ul>
<p><strong>Default:</strong> Storage's <code>default_ttl</code> setting</p>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">httpx (extensions)</label><label for="__tabbed_1_2">httpx (headers)</label><label for="__tabbed_1_3">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Cache this response for 1 hour using extensions (recommended)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Cache this response for 1 hour using headers</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;3600&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Cache this response for 1 hour</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;3600&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">httpx</label><label for="__tabbed_2_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Short TTL for frequently changing stock prices</span>
<span class="n">stocks</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/stocks&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">}</span>  <span class="c1"># 1 minute</span>
<span class="p">)</span>

<span class="c1"># Long TTL for static configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/config&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">86400</span><span class="p">}</span>  <span class="c1"># 24 hours</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Short TTL for frequently changing stock prices</span>
<span class="n">stocks</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/stocks&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;60&quot;</span><span class="p">}</span>  <span class="c1"># 1 minute</span>
<span class="p">)</span>

<span class="c1"># Long TTL for static configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/config&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;86400&quot;</span><span class="p">}</span>  <span class="c1"># 24 hours</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="hishel_refresh_ttl_on_access">hishel_refresh_ttl_on_access</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> When <code>True</code>, accessing a cached entry resets its TTL, keeping frequently accessed entries fresh. When <code>False</code>, the TTL countdown starts from the original storage time and is not affected by subsequent accesses.</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Keep popular content cached longer (sliding expiration)</li>
<li>Ensure rarely accessed content expires on schedule (fixed expiration)</li>
</ul>
<p><strong>Default:</strong> Storage's <code>refresh_ttl_on_access</code> setting (typically <code>True</code>)</p>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">httpx</label><label for="__tabbed_3_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Enable sliding expiration - each access resets the timer</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/user/profile&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_refresh_ttl_on_access&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Enable sliding expiration - each access resets the timer</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/user/profile&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Refresh-Ttl-On-Access&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">httpx</label><label for="__tabbed_4_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># User session data - keep active sessions cached</span>
<span class="c1"># Each access extends the cache lifetime</span>
<span class="n">session_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/user/session&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span>  <span class="c1"># 30 minutes</span>
        <span class="s2">&quot;hishel_refresh_ttl_on_access&quot;</span><span class="p">:</span> <span class="kc">True</span>  <span class="c1"># Reset on each use</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Analytics report - expire exactly 1 hour after creation</span>
<span class="c1"># Don&#39;t extend lifetime even if accessed multiple times</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/reports/daily&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>  <span class="c1"># 1 hour</span>
        <span class="s2">&quot;hishel_refresh_ttl_on_access&quot;</span><span class="p">:</span> <span class="kc">False</span>  <span class="c1"># Fixed expiration</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># User session data - keep active sessions cached</span>
<span class="c1"># Each access extends the cache lifetime</span>
<span class="n">session_data</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/user/session&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;1800&quot;</span><span class="p">,</span>  <span class="c1"># 30 minutes</span>
        <span class="s2">&quot;X-Hishel-Refresh-Ttl-On-Access&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>  <span class="c1"># Reset on each use</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Analytics report - expire exactly 1 hour after creation</span>
<span class="c1"># Don&#39;t extend lifetime even if accessed multiple times</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/reports/daily&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;3600&quot;</span><span class="p">,</span>  <span class="c1"># 1 hour</span>
        <span class="s2">&quot;X-Hishel-Refresh-Ttl-On-Access&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span>  <span class="c1"># Fixed expiration</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="hishel_spec_ignore">hishel_spec_ignore</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> When <code>True</code>, Hishel ignores RFC 9111 caching rules and caches the response regardless of <code>Cache-Control</code>, <code>Expires</code>, or other standard headers. The response will be stored even if it would normally be uncacheable.</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Force caching of responses with <code>no-store</code> or <code>no-cache</code></li>
<li>Cache responses without proper cache headers</li>
<li>Override server caching directives for testing</li>
</ul>
<p><strong>Default:</strong> <code>False</code> (follow RFC 9111 specification)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use with caution. Ignoring the specification may cache sensitive data or stale content.</p>
</div>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">httpx</label><label for="__tabbed_5_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Force caching even if server says not to</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/dynamic-content&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_spec_ignore&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Force caching even if server says not to</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/dynamic-content&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Spec-Ignore&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">httpx</label><label for="__tabbed_6_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Development: Cache API responses that don&#39;t have cache headers</span>
<span class="c1"># This reduces API calls during development/testing</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/test-endpoint&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_spec_ignore&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">300</span>  <span class="c1"># Cache for 5 minutes</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Cache a response that has Cache-Control: no-store</span>
<span class="c1"># Useful when you control both client and server</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/private-but-cacheable&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_spec_ignore&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">60</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Development: Cache API responses that don&#39;t have cache headers</span>
<span class="c1"># This reduces API calls during development/testing</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/test-endpoint&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Spec-Ignore&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;300&quot;</span>  <span class="c1"># Cache for 5 minutes</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Cache a response that has Cache-Control: no-store</span>
<span class="c1"># Useful when you control both client and server</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/private-but-cacheable&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Spec-Ignore&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;60&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="hishel_body_key">hishel_body_key</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> When <code>True</code>, includes the request body in cache key generation. This allows caching different responses for the same URL but with different request bodies, which is essential for POST requests and GraphQL queries.</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Cache POST requests with different payloads</li>
<li>Cache GraphQL queries (different queries to same endpoint)</li>
<li>Cache search requests with different parameters in body</li>
</ul>
<p><strong>Default:</strong> <code>False</code> (body not included in cache key)</p>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">httpx</label><label for="__tabbed_7_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Cache POST request based on body content</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">},</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_body_key&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Cache POST request based on body content</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">},</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Body-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">httpx</label><label for="__tabbed_8_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># GraphQL: Cache different queries to the same endpoint</span>
<span class="n">query1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/graphql&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;{ user(id: 1) { name email } }&quot;</span>
    <span class="p">},</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_body_key&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">300</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">query2</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/graphql&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;{ posts { title author } }&quot;</span>
    <span class="p">},</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_body_key&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">300</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="c1"># These will be cached separately despite same URL</span>

<span class="c1"># Search API: Cache different search queries</span>
<span class="n">search_python</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_body_key&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">600</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">search_javascript</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;javascript&quot;</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_body_key&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">600</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="c1"># Different searches cached separately</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># GraphQL: Cache different queries to the same endpoint</span>
<span class="n">query1</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/graphql&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;{ user(id: 1) { name email } }&quot;</span>
    <span class="p">},</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Body-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;300&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">query2</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/graphql&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;{ posts { title author } }&quot;</span>
    <span class="p">},</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Body-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;300&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="c1"># These will be cached separately despite same URL</span>

<span class="c1"># Search API: Cache different search queries</span>
<span class="n">search_python</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Body-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;600&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">search_javascript</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/search&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;javascript&quot;</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Body-Key&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;600&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="c1"># Different searches cached separately</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h2 id="response-metadata">Response Metadata</h2>
<p>Response metadata provides information about cache operations that occurred. These fields are read-only and set by Hishel.</p>
<h3 id="hishel_from_cache">hishel_from_cache</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> Indicates whether the response was served from cache (<code>True</code>) or fetched from the origin server (<code>False</code>).</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Monitor cache hit rates</li>
<li>Debug caching behavior</li>
<li>Log cache performance</li>
<li>Conditional logic based on cache status</li>
</ul>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">httpx</label><label for="__tabbed_9_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>

<span class="c1"># Check if response came from cache</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_from_cache&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Cache hit&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Cache miss - fetched from origin&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>

<span class="c1"># Check if response came from cache</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-From-Cache&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Cache hit&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Cache miss - fetched from origin&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">httpx</label><label for="__tabbed_10_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Monitor cache performance</span>
<span class="n">cache_hits</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">cache_misses</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/popular-data&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_from_cache&quot;</span><span class="p">):</span>
        <span class="n">cache_hits</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cache_misses</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">hit_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">cache_hits</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cache hit rate: </span><span class="si">{</span><span class="n">hit_rate</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

<span class="c1"># Conditional processing based on cache status</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/user/profile&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_from_cache&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using cached profile - may be slightly outdated&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fresh profile data from server&quot;</span><span class="p">)</span>
    <span class="c1"># Trigger additional processing for fresh data</span>
    <span class="n">process_fresh_data</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Monitor cache performance</span>
<span class="n">cache_hits</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">cache_misses</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/popular-data&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-From-Cache&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
        <span class="n">cache_hits</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cache_misses</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">hit_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">cache_hits</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cache hit rate: </span><span class="si">{</span><span class="n">hit_rate</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

<span class="c1"># Conditional processing based on cache status</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/user/profile&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-From-Cache&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using cached profile - may be slightly outdated&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fresh profile data from server&quot;</span><span class="p">)</span>
    <span class="c1"># Trigger additional processing for fresh data</span>
    <span class="n">process_fresh_data</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="hishel_revalidated">hishel_revalidated</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> Indicates whether a stale cached response was revalidated with the origin server. When <code>True</code>, the response was in cache but required validation (typically resulting in a 304 Not Modified response).</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Monitor revalidation frequency</li>
<li>Debug cache freshness logic</li>
<li>Track conditional request behavior</li>
<li>Optimize cache TTL settings</li>
</ul>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">httpx</label><label for="__tabbed_11_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>

<span class="c1"># Check if cached response was revalidated</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_revalidated&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Response was revalidated (304 Not Modified)&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>

<span class="c1"># Check if cached response was revalidated</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Revalidated&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Response was revalidated (304 Not Modified)&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">httpx</label><label for="__tabbed_12_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Track different cache states</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/articles&quot;</span><span class="p">)</span>

<span class="n">from_cache</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_from_cache&quot;</span><span class="p">)</span>
<span class="n">revalidated</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_revalidated&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">from_cache</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">revalidated</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Fresh cache hit - no server contact&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">from_cache</span> <span class="ow">and</span> <span class="n">revalidated</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;↻ Stale cache revalidated - saved bandwidth&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Cache miss - full response from server&quot;</span><span class="p">)</span>

<span class="c1"># Analyze caching patterns</span>
<span class="n">revalidation_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">total_requests</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total_requests</span><span class="p">):</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_revalidated&quot;</span><span class="p">):</span>
        <span class="n">revalidation_count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Revalidation rate: </span><span class="si">{</span><span class="p">(</span><span class="n">revalidation_count</span><span class="o">/</span><span class="n">total_requests</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tip: High revalidation rate might indicate TTL is too short&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Track different cache states</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/articles&quot;</span><span class="p">)</span>

<span class="n">from_cache</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-From-Cache&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>
<span class="n">revalidated</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Revalidated&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>

<span class="k">if</span> <span class="n">from_cache</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">revalidated</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Fresh cache hit - no server contact&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">from_cache</span> <span class="ow">and</span> <span class="n">revalidated</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;↻ Stale cache revalidated - saved bandwidth&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Cache miss - full response from server&quot;</span><span class="p">)</span>

<span class="c1"># Analyze caching patterns</span>
<span class="n">revalidation_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">total_requests</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total_requests</span><span class="p">):</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Revalidated&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
        <span class="n">revalidation_count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Revalidation rate: </span><span class="si">{</span><span class="p">(</span><span class="n">revalidation_count</span><span class="o">/</span><span class="n">total_requests</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tip: High revalidation rate might indicate TTL is too short&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="hishel_spec_ignored">hishel_spec_ignored</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> Indicates whether RFC 9111 caching specification was ignored for this response. When <code>True</code>, the response was cached despite having directives that would normally prevent caching (like <code>Cache-Control: no-store</code>).</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Verify <code>hishel_spec_ignore</code> worked as expected</li>
<li>Audit which responses bypass standard caching rules</li>
<li>Debug forced caching behavior</li>
</ul>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">httpx</label><label for="__tabbed_13_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Force cache a response</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/no-cache-endpoint&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_spec_ignore&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Verify spec was ignored</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_spec_ignored&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Caching rules were bypassed as requested&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Force cache a response</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/no-cache-endpoint&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Spec-Ignore&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Verify spec was ignored</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Spec-Ignored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Caching rules were bypassed as requested&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:2"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">httpx</label><label for="__tabbed_14_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Testing/Development: Force cache responses without proper headers</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/dev-endpoint&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;hishel_spec_ignore&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">300</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Log which responses bypass caching rules</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_spec_ignored&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠️  Spec ignored for: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Original Cache-Control: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cache-control&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Response cached anyway&quot;</span><span class="p">)</span>

<span class="c1"># Audit forced caching</span>
<span class="n">forced_cache_urls</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">api_endpoints</span><span class="p">:</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_spec_ignore&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_spec_ignored&quot;</span><span class="p">):</span>
        <span class="n">forced_cache_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total endpoints with forced caching: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">forced_cache_urls</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Testing/Development: Force cache responses without proper headers</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/dev-endpoint&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;X-Hishel-Spec-Ignore&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;300&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Log which responses bypass caching rules</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Spec-Ignored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠️  Spec ignored for: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Original Cache-Control: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cache-control&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Response cached anyway&quot;</span><span class="p">)</span>

<span class="c1"># Audit forced caching</span>
<span class="n">forced_cache_urls</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">api_endpoints</span><span class="p">:</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Spec-Ignore&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Spec-Ignored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
        <span class="n">forced_cache_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total endpoints with forced caching: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">forced_cache_urls</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="hishel_stored">hishel_stored</h3>
<p><strong>Type:</strong> <code>bool | None</code></p>
<p><strong>Description:</strong> Indicates whether the response was successfully stored in cache. When <code>True</code>, the response met all caching requirements and was saved. When <code>False</code>, the response was not cacheable (e.g., due to <code>Cache-Control: no-store</code>).</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Verify responses are being cached</li>
<li>Debug why responses aren't cached</li>
<li>Monitor cache storage success rate</li>
<li>Validate caching configuration</li>
</ul>
<p><strong>Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:2"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">httpx</label><label for="__tabbed_15_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>

<span class="c1"># Check if response was cached</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_stored&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Response stored in cache&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Response not cached&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>

<span class="c1"># Check if response was cached</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Stored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Response stored in cache&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Response not cached&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p><strong>Real-World Example:</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">httpx</label><label for="__tabbed_16_2">requests</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">hishel.httpx</span><span class="w"> </span><span class="kn">import</span> <span class="n">SyncCacheClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SyncCacheClient</span><span class="p">()</span>

<span class="c1"># Debug why responses aren&#39;t being cached</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/user/profile&quot;</span><span class="p">)</span>

<span class="n">stored</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_stored&quot;</span><span class="p">)</span>
<span class="n">from_cache</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_from_cache&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">stored</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">from_cache</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;⚠️  Response not cached!&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Status: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cache-Control: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cache-control&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Check server caching headers&quot;</span><span class="p">)</span>

<span class="c1"># Monitor cache storage rate</span>
<span class="n">stored_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">not_stored_count</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">test_urls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;https://api.example.com/static&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://api.example.com/dynamic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://api.example.com/private&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">test_urls</span><span class="p">:</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_stored&quot;</span><span class="p">):</span>
        <span class="n">stored_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> - cached&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">not_stored_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> - not cached&quot;</span><span class="p">)</span>

<span class="n">storage_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">stored_count</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_urls</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Storage rate: </span><span class="si">{</span><span class="n">storage_rate</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

<span class="c1"># Validate caching after configuration changes</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/test&quot;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;hishel_ttl&quot;</span><span class="p">:</span> <span class="mi">600</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hishel_stored&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Configuration working - responses are being cached&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Configuration issue - check TTL and cache headers&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">hishel.requests</span><span class="w"> </span><span class="kn">import</span> <span class="n">CacheAdapter</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="n">CacheAdapter</span><span class="p">())</span>

<span class="c1"># Debug why responses aren&#39;t being cached</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/user/profile&quot;</span><span class="p">)</span>

<span class="n">stored</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Stored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>
<span class="n">from_cache</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-From-Cache&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">stored</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">from_cache</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;⚠️  Response not cached!&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Status: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Cache-Control: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cache-control&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Check server caching headers&quot;</span><span class="p">)</span>

<span class="c1"># Monitor cache storage rate</span>
<span class="n">stored_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">not_stored_count</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">test_urls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;https://api.example.com/static&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://api.example.com/dynamic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;https://api.example.com/private&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">test_urls</span><span class="p">:</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Stored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
        <span class="n">stored_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> - cached&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">not_stored_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> - not cached&quot;</span><span class="p">)</span>

<span class="n">storage_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">stored_count</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_urls</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Storage rate: </span><span class="si">{</span><span class="n">storage_rate</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

<span class="c1"># Validate caching after configuration changes</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.example.com/test&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Hishel-Ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;600&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Hishel-Stored&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Configuration working - responses are being cached&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✗ Configuration issue - check TTL and cache headers&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<hr />
<h2 id="metadata-reference-summary">Metadata Reference Summary</h2>
<h3 id="setting-request-metadata">Setting Request Metadata</h3>
<table>
<thead>
<tr>
<th>Library</th>
<th>Method</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>httpx</strong></td>
<td><code>extensions</code> (recommended)</td>
<td><code>extensions={"hishel_ttl": 3600}</code> (Python types)</td>
</tr>
<tr>
<td><strong>httpx</strong></td>
<td><code>headers</code></td>
<td><code>headers={"X-Hishel-Ttl": "3600"}</code> (string values)</td>
</tr>
<tr>
<td><strong>requests</strong></td>
<td><code>headers</code></td>
<td><code>headers={"X-Hishel-Ttl": "3600"}</code> (string values)</td>
</tr>
</tbody>
</table>
<h3 id="request-metadata-fields">Request Metadata Fields</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Header</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hishel_ttl</code></td>
<td><code>X-Hishel-Ttl</code></td>
<td><code>float</code> / <code>string</code></td>
<td>Custom TTL in seconds</td>
</tr>
<tr>
<td><code>hishel_refresh_ttl_on_access</code></td>
<td><code>X-Hishel-Refresh-Ttl-On-Access</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Enable sliding expiration</td>
</tr>
<tr>
<td><code>hishel_spec_ignore</code></td>
<td><code>X-Hishel-Spec-Ignore</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Ignore RFC 9111 rules</td>
</tr>
<tr>
<td><code>hishel_body_key</code></td>
<td><code>X-Hishel-Body-Key</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Include body in cache key</td>
</tr>
</tbody>
</table>
<h3 id="reading-response-metadata">Reading Response Metadata</h3>
<table>
<thead>
<tr>
<th>Library</th>
<th>Method</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>httpx</strong></td>
<td><code>extensions</code> dict</td>
<td><code>response.extensions.get("hishel_from_cache")</code></td>
</tr>
<tr>
<td><strong>httpx</strong></td>
<td><code>headers</code></td>
<td><code>response.headers.get("X-Hishel-From-Cache")</code></td>
</tr>
<tr>
<td><strong>requests</strong></td>
<td><code>headers</code></td>
<td><code>response.headers.get("X-Hishel-From-Cache")</code></td>
</tr>
</tbody>
</table>
<h3 id="response-metadata-fields">Response Metadata Fields</h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Header</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hishel_from_cache</code></td>
<td><code>X-Hishel-From-Cache</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Response from cache</td>
</tr>
<tr>
<td><code>hishel_revalidated</code></td>
<td><code>X-Hishel-Revalidated</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Response was revalidated</td>
</tr>
<tr>
<td><code>hishel_spec_ignored</code></td>
<td><code>X-Hishel-Spec-Ignored</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Spec was ignored</td>
</tr>
<tr>
<td><code>hishel_stored</code></td>
<td><code>X-Hishel-Stored</code></td>
<td><code>bool</code> / <code>string</code></td>
<td>Response was stored</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Type Differences</p>
<ul>
<li><strong>httpx extensions</strong>: Native Python types (<code>bool</code>, <code>float</code>)</li>
<li><strong>httpx/requests headers</strong>: String values (<code>"true"</code>, <code>"false"</code>, <code>"3600"</code>)</li>
</ul>
</div>
<hr />







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>